<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Blended Web Editor | Edit</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='lib/codemirror.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.min.css') }}">
</head>

<body>
    <nav class="navbar navbar-toggleable-md navbar-inverse" style="background-color: #2c3e50;">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="/"><i class="fa fa-th" aria-hidden="true"></i> Dashboard</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/files"><i class="fa fa-files-o" aria-hidden="true"></i> Files</a>
                </li>
                <li class="nav-item active item-active">
                    <a class="nav-link" href="/edit"><i class="fa fa-pencil" aria-hidden="true"></i> Edit</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container-fluid" style="margin-top: 1rem;">
        <div class="col-md-12">
            <div class="card">
                <h3 class="card-header">Edit Page</h3>
                <div class="card-block">
                    <div class="card-text">
                        <form method="post" action="{{ url_for('save') }}">
                            <div class="form-group">
                                <textarea id="code" name="code" class="form-control">{{ content }}</textarea>
                            </div>
                            <input type="hidden" value="{{ filename }}" id="filename" name="filename">
                            <button type="submit" class="btn btn-red">Save Page</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='lib/codemirror.js') }}"></script>
    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            lineWrapping: true
        });

        function getParameterByName(name, url) {
            if (!url) {
                url = window.location.href;
            }
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
        if (getParameterByName('finished') == "yes") {
            alert("Page saved!");
        }
    </script>
    <!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="{{ url_for('static', filename='js/jquery-3.1.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tether.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
</body>

</html>
